<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.spjzweb.dao.ToolMeasuringRecordDao">

    <insert id="addToolMeasuringRecord" parameterType="com.spjzweb.entity.ToolMeasuringRecord">
     INSERT INTO tool_measuring_record(tool_measuring_record_no,thread_pitch_gauge_no,thread_pitch_calibration_framwork,sealing_surface_gauge_no,sealing_surface_calibration_ring_no,depth_caliper_no,threading_distance_gauge_no,thread_distance_calibration_sample_no,taper_gauge_no,tooth_height_gauge_no,tooth_height_calibration_sample_no,tooth_width_stop_gauge_no,thread_min_length_sample_no,coupling_length_sample_no,caliper_no,caliper_tolerance,collar_gauge_no) VALUES (#{tool_measuring_record_no},#{thread_pitch_gauge_no},#{thread_pitch_calibration_framwork},#{sealing_surface_gauge_no},#{sealing_surface_calibration_ring_no},#{depth_caliper_no},#{threading_distance_gauge_no},#{thread_distance_calibration_sample_no},#{taper_gauge_no},#{tooth_height_gauge_no},#{tooth_height_calibration_sample_no},#{tooth_width_stop_gauge_no},#{thread_min_length_sample_no},#{coupling_length_sample_no},#{caliper_no},#{caliper_tolerance},#{collar_gauge_no})
    </insert>
    <delete id="delToolMeasuringRecord">
        delete from tool_measuring_record WHERE
        <foreach collection="array" item="item" open="id in (" separator="," close=")">
           #{item}
        </foreach>
    </delete>
    <update id="updateToolMeasuringRecord" parameterType="com.spjzweb.entity.ToolMeasuringRecord">
        UPDATE tool_measuring_record set tool_measuring_record_no=#{tool_measuring_record_no},thread_pitch_gauge_no=#{thread_pitch_gauge_no},thread_pitch_calibration_framwork=#{thread_pitch_calibration_framwork},sealing_surface_gauge_no=#{sealing_surface_gauge_no},sealing_surface_calibration_ring_no=#{sealing_surface_calibration_ring_no},depth_caliper_no=#{depth_caliper_no},threading_distance_gauge_no=#{threading_distance_gauge_no},thread_distance_calibration_sample_no=#{thread_distance_calibration_sample_no},taper_gauge_no=#{taper_gauge_no},tooth_height_gauge_no=#{tooth_height_gauge_no},tooth_height_calibration_sample_no=#{tooth_height_calibration_sample_no},tooth_width_stop_gauge_no=#{tooth_width_stop_gauge_no},thread_min_length_sample_no=#{thread_min_length_sample_no},coupling_length_sample_no=#{coupling_length_sample_no},caliper_no=#{caliper_no},caliper_tolerance=#{caliper_tolerance},collar_gauge_no=#{collar_gauge_no} where id=#{id}
    </update>


    <select id="getCountAllByLike" resultType="int">
        select count(*) from tool_measuring_record o
        <where>
            <if test="tool_measuring_record_no!=null and tool_measuring_record_no!=''">
                AND o.tool_measuring_record_no LIKE CONCAT('%',#{tool_measuring_record_no},'%')
            </if>
            <!--<if test="begin_time!=null">-->
                <!--<![CDATA[ AND DATE_FORMAT(o.inspection_time,'%Y-%m-%d %H:%T:%s')>=DATE_FORMAT(#{begin_time},'%Y-%m-%d 00:00:00')]]>-->
            <!--</if>-->
            <!--<if test="end_time!=null">-->
                <!--<![CDATA[ AND DATE_FORMAT(o.inspection_time,'%Y-%m-%d %H:%T:%s')<=DATE_FORMAT(#{end_time},'%Y-%m-%d 23:59:59')]]>-->
            <!--</if>-->
        </where>
    </select>

    <select id="getAllByLike" resultType="map">
        Select o.* from tool_measuring_record o
        <where>
            <if test="tool_measuring_record_no!=null and tool_measuring_record_no!=''">
                AND o.tool_measuring_record_no LIKE CONCAT('%',#{tool_measuring_record_no},'%')
            </if>
            <!--<if test="begin_time!=null">-->
                <!--<![CDATA[ AND DATE_FORMAT(o.inspection_time,'%Y-%m-%d %H:%T:%s')>=DATE_FORMAT(#{begin_time},'%Y-%m-%d 00:00:00')]]>-->
            <!--</if>-->
            <!--<if test="end_time!=null">-->
                <!--<![CDATA[ AND DATE_FORMAT(o.inspection_time,'%Y-%m-%d %H:%T:%s')<=DATE_FORMAT(#{end_time},'%Y-%m-%d 23:59:59')]]>-->
            <!--</if>-->
        </where>
        ORDER BY o.id DESC
        limit #{skip},#{take}
    </select>
    <select id="getAllToolRecordByNo" resultType="com.spjzweb.entity.ToolMeasuringRecord">
       Select o.* from tool_measuring_record o
        <where>
            <if test="tool_measuring_record_no!=null and tool_measuring_record_no!=''">
                AND o.tool_measuring_record_no LIKE CONCAT('%',#{tool_measuring_record_no},'%')
            </if>
        </where>
        limit 1000
    </select>
    <select id="getToolRecordByNo" resultType="com.spjzweb.entity.ToolMeasuringRecord">
        Select o.* from tool_measuring_record o WHERE o.tool_measuring_record_no=#{tool_measuring_record_no}
    </select>
</mapper>